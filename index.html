<!DOCTYPE html>
<html>
    <head>
        <title>NanoModal Example Page</title>
        <style>
        .nanoModalOverlay.nanoModalOverride {
            z-index: 2000;
        }
        </style>
    </head>
    <body>
        <button onclick="openModal1()">Open Modal 1</button>
        <button onclick="openModal2()">Open Modal 2</button>
        <button onclick="openModal3()">Open Modal 3</button>
        <button onclick="openModal4()">Open Modal 4</button>

        <div id="hiddenModals" style="display: none;">
            <div id="modal3">
                <h3>This is the ULTIMATE modal!</h3>
                <p>This is some info about this modal</p>
                <br>
                Enter your name: <input id="name" type="text">
            </div>
        </div>

        <script type="text/javascript" src="NanoModal.js"></script>
        <script type="text/javascript">
            var modal1 = nanoModal("Test Content");
            var modal2 = nanoModal("", {
                buttons: []
            });
            var modal3 = nanoModal("This is super test content.", {
                overlayClose: false,
                buttons: [{
                    text: "OK",
                    handler: "hide",
                    primary: true
                }, {
                    text: "Cancel",
                    handler: function() {
                        nanoModal("Can't Cancel!!! >:(", {autoRemove: true}).show();
                    }
                }]
            });
            var numShown = 0;
            modal2.onShow(function(modal) {
                modal.setContent("Click outside the modal to close or press escape.<br>" +
                    "This Modal has been shown " + (++numShown) + " times.");
            });
            var modal4 = nanoModal(document.getElementById("modal3"), {
                overlayClose: false,
                buttons: [{
                    text: "WHOA DUDE!",
                    handler: function() {
                        var name = document.getElementById("name").value;
                        if (name.length < 1) {
                             nanoModal("NO! Enter your name NOW!", {autoRemove: true}).show();
                        } else {
                            modal4.hide();
                             nanoModal("Well hello there, " + name, {autoRemove: true}).show();
                        }
                    },
                    primary: true
                }]
            });

            function openModal1() {
                modal1.show();
            }

            function openModal2() {
                modal2.show();
            }

            function openModal3() {
                modal3.show();
            }

            function openModal4() {
                modal4.show();
            }

            var memTestModal1 = nanoModal("HELLO!!!");
            function memLeakTest1() {
                var iter = 0;
                var loop = function() {
                    if (iter % 2 === 0) {
                        memTestModal1.show();
                    } else {
                        memTestModal1.hide();
                    }
                    ++iter;
                    setTimeout(loop, 10);
                };
                loop();
            }
            //memLeakTest1();

            function memLeakTest2() {
                var iter = 0;
                var loop = function() {
                    if (iter % 2 === 0) {
                        memTestModal1 = nanoModal("Hello!! " + iter);
                    } else {
                        memTestModal1.remove();
                    }
                    ++iter;
                    setTimeout(loop, 10);
                };
                loop();
            }
            //memLeakTest2();

            function memLeakTest3() {
                var iter = 0;
                var div = document.createElement("div");
                var b = document.createElement("b");
                b.innerHTML = "Mem Test 3!!!";
                div.appendChild(b);
                document.body.appendChild(div);
                var loop = function() {
                    if (iter % 2 === 0) {
                        memTestModal1 = nanoModal({
                            content: div,
                            buttons: [{
                                text: "OK",
                                handler: "hide",
                                primary: true
                            }, {
                                text: "Cancel",
                                handler: function() {
                                    console.log("ASDFSAFD");
                                }
                            }]
                        });
                        memTestModal1.show();
                    } else {
                        memTestModal1.remove();
                    }
                    ++iter;
                    setTimeout(loop, 10);
                };
                loop();
            }
            //memLeakTest3();
        </script>
    </body>
</html>
